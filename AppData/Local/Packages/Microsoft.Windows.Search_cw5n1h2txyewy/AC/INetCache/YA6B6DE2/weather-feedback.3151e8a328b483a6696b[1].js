(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["weather-feedback"],{56162:function(){},79180:function(){},6442:function(e,t,i){"use strict";i.r(t),i.d(t,{ToolingInfo:function(){return yt},WeatherFeedback:function(){return bt},WeatherFeedbackActions:function(){return Ue},WeatherFeedbackConnector:function(){return ut},WeatherFeedbackReducer:function(){return mt}});var a=i(50425),o=i(33940),n=i(88828),s=i(14989),r=i(38156),l=i(65135);const d="1",c="28",u="3",p="31",h="32",g="33",m="30",f="5",b="23",y="231",w="232",k="234",v="25",C="251",x="252",F="253",_="110",S="111",T="112",E="310",I="312",N="-11",R="v3_231",j="v3_232",D="v3_234",O="v3_251",W="v3_252",A="v3_253",P="v3_26",L="v3_261",U="v3_262",B="v3_263",V="v3_temp_colder",M="v3_temp_right",G="v3_temp_warmer",z="-1",H=[{skyCode:d,iconCode:d,nigthIconCode:c,value:"sunny",nightValue:"clearNight",category:"sunny",categoryNight:"clear",selected:!1},{skyCode:_,iconCode:_,nigthIconCode:E,value:"mostlySunnyDay",nightValue:"mostlyClearNight",category:"Mostly sunny",categoryNight:"Mostly clear",selected:!1},{skyCode:S,iconCode:S,nigthIconCode:m,value:"partlySunnyDay",nightValue:"cloudy",category:"Partly sunny",categoryNight:"Partly cloudy",selected:!1},{skyCode:T,iconCode:T,nigthIconCode:I,value:"mostlyCloudyDay",nightValue:"mostlyCloudyNight",category:"Mostly cloudy",categoryNight:"Mostly cloudy",selected:!1},{skyCode:f,iconCode:f,nigthIconCode:f,value:"overcast",nightValue:"overcast",category:"cloudy",categoryNight:"cloudy",selected:!1}],$=[{skyCode:N,iconCode:N,value:"noPrecipitation",category:"noPrecipitation",selected:!1},{skyCode:b,iconCode:b,value:"rain",category:"rain",selected:!1,details:[{skyCode:R,iconCode:R,value:"rainLevelLight",category:"rain",subcategory:"light",selected:!1},{skyCode:j,iconCode:j,value:"rainLevelMedium",category:"rain",subcategory:"medium",selected:!1},{skyCode:D,iconCode:D,value:"rainLevelHeavy",category:"rain",subcategory:"heavy",selected:!1}]},{skyCode:v,iconCode:v,value:"snow",category:"snow",selected:!1,details:[{skyCode:O,iconCode:O,value:"snowLevelLight",category:"snow",subcategory:"light",selected:!1},{skyCode:W,iconCode:W,value:"snowLevelMedium",category:"snow",subcategory:"medium",selected:!1},{skyCode:A,iconCode:A,value:"snowLevelHeavy",category:"snow",subcategory:"heavy",selected:!1}]},{skyCode:P,iconCode:P,value:"mixedRainSnow",category:"Mix/Ice",selected:!1,details:[{skyCode:L,iconCode:L,value:"mixedRainSnowLight",category:"Mix/Ice",subcategory:"light",selected:!1},{skyCode:U,iconCode:U,value:"mixedRainSnowMedium",category:"Mix/Ice",subcategory:"medium",selected:!1},{skyCode:B,iconCode:B,value:"mixedRainSnowHeavy",category:"Mix/Ice",subcategory:"heavy",selected:!1}]}],K=[{skyCode:V,iconCode:V,value:"temperatureColder",category:"colder",selected:!1},{skyCode:M,iconCode:M,value:"temperatureRight",category:"about right",selected:!1},{skyCode:G,iconCode:G,value:"temperatureWarmer",category:"warmer",selected:!1}];var q=i(14061),Y=i(89677),Q=i(10803);const Z="wf_colums4",X=e=>({weather_feedback_root:{position:"relative",display:"block"},weather_feedback_reset_button:{display:"block",position:"relative",background:"none",border:"none",outline:"none",margin:"0",padding:"0","&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"}},weather_feedback_popup_section:{position:"absolute",display:"none",width:"400px",color:"#424242","margin-top":"4px","border-radius":"6px",border:"1px solid #FFFFFF","z-index":"1",outline:"none !important","&.wf_colums4":{width:"524px"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px !important"},".wfFollowPageBackground &":{border:"1px solid rgba(255, 255, 255, 0.1)",color:"#FFFFFF","& button":{color:"#FFFFFF"}}},weather_feedback_popup_triangle:{position:"absolute",top:"-4px",[(0,Y.Ih)("left","right",e.direction)]:"60px",width:"8px",height:"8px","background-color":"#FFFFFF",border:"1px solid #FFFFFF",transform:"rotate(45deg)",[q.xE]:{display:"none"},".wfFollowPageBackground &":{border:"1px solid rgba(255, 255, 255, 0.1)"}},weather_feedback_popup_container:{position:"relative","z-index":"801",background:"#FFFFFF",".wfFollowPageBackground &":{"border-radius":"6px"}},weather_feedback_popup_inner:{position:"relative",padding:"0","background-color":"#FFFFFF",".wfFollowPageBackground &":{color:"#FFFFFF","border-radius":"6px"}},weather_feedback_popup_title:{display:"block",padding:"20px 24px 0 24px",position:"relative","font-size":"14px","line-height":"16px","white-space":"pre-wrap","word-break":"break-word","vertical-align":"top","text-transform":"uppercase","font-weight":"500"},weather_feedback_popup_sub_title:{display:"inline-block",padding:"0 24px 0 24px",position:"relative","font-size":"14px","line-height":"16px","vertical-align":"top","white-space":"pre-wrap","word-break":"break-word"},weather_feedback_popup_content:{margin:"0",padding:"0 24px 0 24px",display:"block"},weather_feedback_popup_weathers:{padding:"0",margin:"0",display:"block"},weather_feedback_popup_weathers_item_container:{display:"inline-block","vertical-align":"bottom",width:"110px",height:"58px",[(0,Y.Ih)("margin-right","margin-left",e.direction)]:"10px","margin-top":"8px","&:nth-child(1)":{"margin-top":"12px"},"&[data-row-index='2']":{"margin-right":"0","margin-left":"0"}},weather_feedback_popup_colums2:{},weather_feedback_popup_weathers_item:{"box-sizing":"border-box",width:"100%",height:"100%",margin:"0",padding:"0",background:"none",outline:"none",border:"1px solid #E5E5E5","border-radius":"6px",cursor:"pointer",".wfFollowPageBackground &":{border:"0.5px solid rgba(255, 255, 255, 0.1)"},"&:hover":{border:"1px solid #B3D7F2"},"&.selected":{border:"1px solid #0078D4","background-color":"rgba(0, 120, 212, 0.12)",[q.xE]:{border:"1px solid","border-color":"Highlight"},".wfFollowPageBackground &":{border:"1px solid #FFFFFF",background:"rgba(0, 0, 0, 0.02)"}},"&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"},"& > div":{outline:"none"}},weather_feedback_popup_weathers_item_content:{position:"relative",width:"100%",height:"100%",padding:"0","box-sizing":"border-box",display:"flex","flex-direction":"column","align-items":"center","justify-content":"center","& svg":{display:"block"}},weather_feedback_weather_icon:{height:"20px",width:"auto"},weather_feedback_popup_weathers_item_name:{"font-size":"12px","line-height":"14px","text-transform":"capitalize","padding-top":"2px",color:"#424242","word-break":"break-word","button[data-skycode='v3_26'] &":{"padding-top":"0",".wf_colums4 &":{"padding-top":"2px"}},".wfFollowPageBackground &":{color:"#FFFFFF"}},weather_feedback_popup_weather_details_container:{position:"relative",width:"352px",border:"1px solid #E5E5E5","box-sizing":"border-box","border-radius":"6px","box-shadow":"0px 0px 3px 1px rgba(0, 0, 0, 0.09)","margin-bottom":"8px",[(0,Y.Ih)("margin-right","margin-left",e.direction)]:"12px","&.wf_colums4":{[(0,Y.Ih)("left","right",e.direction)]:"122px"},".wfFollowPageBackground &":{background:"rgba(0, 0, 0, 0.05)",border:" 0.5px solid rgba(255, 255, 255, 0.1)"}},weather_feedback_popup_weather_details:{position:"relative","box-sizing":"border-box",width:"344px",margin:"0","list-style":"none",padding:"0 4px",display:"grid","grid-template-rows":"48px","grid-template-columns":"repeat(3, 1fr)","&[data-details-length='1']":{"grid-template-columns":"repeat(1, 1fr)"},"&[data-details-length='2']":{"grid-template-columns":"repeat(2, 1fr)"},"grid-column-gap":"10px","border-radius":"6px","backdrop-filter":"blur(70px)"},wf_triangle:{position:"absolute",top:"-4px",width:"8px",height:"8px","background-color":"#FFFFFF",border:"1px solid #FFFFFF",transform:"rotate(45deg)","backdrop-filter":"blur(70px)","box-shadow":"0px 0px 3px 1px rgba(0, 0, 0, 0.09)",[(0,Y.Ih)("left","right",e.direction)]:"50px","&[data-row-index='1']":{[(0,Y.Ih)("left","right",e.direction)]:"170px"},"&[data-row-index='2']":{[(0,Y.Ih)("left","right",e.direction)]:"290px"},"&.wf_colums4":{[(0,Y.Ih)("left","right",e.direction)]:"50px","&[data-row-index='1']":{[(0,Y.Ih)("left","right",e.direction)]:"50px"},"&[data-row-index='2']":{[(0,Y.Ih)("left","right",e.direction)]:"170px"},"&[data-row-index='3']":{[(0,Y.Ih)("left","right",e.direction)]:"290px"}},".wfFollowPageBackground &":{background:"rgba(0, 0, 0, 0.05)",border:" 0.5px solid rgba(255, 255, 255, 0.1)"},[q.xE]:{display:"none"}},weather_feedback_popup_details_item_container:{padding:"8px 4px","z-index":"1"},weather_feedback_popup_details_item:{border:"none",outline:"none",padding:"0",background:"none",height:"32px",width:"100%",position:"relative",display:"block",cursor:"pointer","&:hover":{"background-color":"rgba(0, 120, 212, 0.12)",[q.xE]:{border:"1px solid","border-color":q.YP.selectedBackground}},"&&.selected":{"background-color":"rgba(0, 120, 212, 0.12)",border:"1px solid #0078D4",".wfFollowPageBackground &":{background:"rgba(0, 0, 0, 0.05)",border:"1px solid #FFFFFF"},[q.xE]:{border:"1px solid","border-color":q.YP.selectedBackground}},"&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px",border:"1px solid","border-color":"rgba(0, 120, 212, 0.12)"},"& > div":{outline:"none"}},weather_feedback_popup_details_item_content:{display:"flex",margin:"0",padding:"0",height:"32px",overflow:"hidden","align-items":"center","justify-content":"center"},weather_feedback_popup_details_item_name:{"font-size":"12px","line-height":"14px",[(0,Y.Ih)("margin-left","margin-right",e.direction)]:"10px","word-break":"break-word","text-transform":"capitalize"},weather_feedback_popup_others:{},weather_feedback_popup_textarea_title:{"font-size":"14px","line-height":"16px",margin:"12px 0 8px 0",color:"#424242","white-space":"pre-wrap","word-break":"break-word"},weather_feedback_popup_textarea_container:{display:"block",position:"relative"},weather_feedback_popup_textarea:{display:"block",width:"352px",height:"96px","padding-bottom":"20px",border:"1px solid #E5E5E5","box-sizing":"border-box","border-radius":"6px","font-size":"12px","line-height":"14px",color:"#444444",background:"none !important",resize:"none",outline:"none","&:focus":{outline:"none",border:"1px solid #E5E5E5"},[q.xE]:{color:"#FFFFFF"}},weather_feedback_popup_textarea_hints:{display:"block",position:"absolute",color:"#919191","font-size":"10px","line-height":"12px","margin-bottom":"12px",[(0,Y.Ih)("margin-right","margin-left",e.direction)]:"24px",[(0,Y.Ih)("right","left",e.direction)]:"0",bottom:"0"},weather_feedback_popup_footer:{position:"relative",padding:"0 24px 24px 24px",display:"flex","justify-content":"space-around",overflow:"visible"},weather_feedback_popup_footer_button:{position:"relative",display:"flex",padding:"0",background:"none",border:"none",outline:"none",cursor:"pointer",height:"32px",width:"172px","margin-top":"12px","border-radius":"6px","align-items":"center","justify-content":"center",".wf_colums4 &":{width:"232px"},"& span":{"font-size":"14px","line-height":"16px","font-weight":"600","text-transform":"capitalize"},"&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"},"& > span":{outline:"none"}},weather_feedback_popup_cancel:{"background-color":"#EDEDED",border:"1px solid #EDEDED",color:"#424242 !important",[q.xE]:{border:"1px solid #FFFFFF","&:hover":{"background-color":q.YP.selectedBackground}}},weather_feedback_popup_submit:{[(0,Y.Ih)("margin-left","margin-right",e.direction)]:"8px",color:"#FFFFFF","background-color":"#B3D7F2",border:"1px solid #B3D7F2",cursor:"default",[q.xE]:{"border-color":"GrayText",color:"GrayText",fill:"GrayText",border:"1px solid"},"&&.enabled":{cursor:"pointer","background-color":"#0078D4",border:"1px solid #0078D4",[q.xE]:{border:"1px solid","border-color":q.YP.buttonText,color:q.YP.buttonText,"&:hover":{"background-color":q.YP.selectedBackground}}}},weather_feedback_thanks_message_container:{position:"fixed",display:"flex",height:"38px",left:"50%",bottom:"100px","background-color":"#4A4A4A","border-radius":"6px","align-items":"center","justify-content":"center",padding:"0 16px","z-index":"101",transform:"translate(-50%, 0)"},weather_feedback_thanks_message:{"font-size":"14px","line-height":"20px",color:"#FFFFFF"},weather_feedback_popup_show:{display:"block"},wf_item_smaller_height:{height:"52px !important"},wf_popup_subtitle:{padding:"0 24px 0 24px","margin-top":"6px","font-size":"14px"},wf_skyConditions_container:{"margin-top":"12px"},wf_skyConditions_title:{"font-size":"14px","line-height":"1","font-weight":"500"},wf_skyConditions_items:{width:"366px","margin-top":"8px","&.wf_colums4":{width:"482px"}},wf_skyCondition_item:{width:"33%",height:"58px",display:"inline-block","box-sizing":"border-box","margin-bottom":"8px","vertical-align":"top",[(0,Y.Ih)("padding-right","padding-left",e.direction)]:"12px",".wf_colums4 &":{width:"20%",[(0,Y.Ih)("padding-right","padding-left",e.direction)]:"6px"}},wf_precipitation_container:{"margin-top":"8px"},wf_precipitation_title:{"font-size":"14px","line-height":"1","font-weight":"500"},wf_precipitation_items:{width:"366px","margin-top":"8px","&.wf_colums4":{width:"488px"}},wf_precipitation_item:{width:"110px",height:"58px",display:"inline-block","margin-bottom":"8px","vertical-align":"top",[(0,Y.Ih)("margin-right","margin-left",e.direction)]:"12px","& svg":{display:"block"}},wf_temp_container:{"margin-top":"8px"},wf_temp_title:{"font-size":"14px","line-height":"1","font-weight":"500"},wf_temp_items:{width:"366px","margin-top":"8px","&.wf_colums4":{width:"488px",display:"flex","justify-content":"space-between"}},wf_temp_item:{width:"33%",height:"58px",display:"inline-block","box-sizing":"border-box","margin-bottom":"8px","vertical-align":"top",[(0,Y.Ih)("padding-right","padding-left",e.direction)]:"12px"},wf_summary_container:{position:"relative",height:"40px","box-sizing":"border-box",padding:"12px 24px","background-color":"#F8F8F8",".wfFollowPageBackground &":{"background-color":"rgba(0, 0, 0, 0.12)"}},wf_summary_content:{position:"relative",display:"flex","font-size":"12px","line-height":"14px","align-items":"center","justify-content":"flex-end"},wf_summary_submitted_num:{color:"#0078D4",margin:"0 8px",".wfFollowPageBackground &":{color:"#FFFFFF"}},wf_summary_submitted_desc:{color:"#444444",".wfFollowPageBackground &":{color:"#FFFFFF"}},wf_close_button:Object.assign(Object.assign({position:"absolute",top:"6px",[(0,Y.Ih)("right","left",e.direction)]:"10px",width:"24px",height:"24px",padding:"6px",background:"none",border:"none",cursor:"pointer","z-index":"1","&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"},"& .iconClose":{display:"block",width:"12px",height:"12px"}},(0,Q.F0)(Object.assign({outline:"2px solid #000000"},q.St))),{[q.xE]:(0,Q.F0)({background:`${q.YP.selectedBackground} !important`})})});var J=i(37834),ee=i(33832),te=i(72661),ie=i(84966),ae=i(65473),oe=i(54788);const ne=e=>{let t=null;switch(null==e?void 0:e.type){case d:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,src:oe.x.getWeatherGlyph("1")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Q6K}));break;case c:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,src:oe.x.getWeatherGlyph("28")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.ETn}));break;case u:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.kZR}));break;case f:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("5")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Nsl}));break;case b:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("8")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.kZR}));break;case v:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("20")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.mEu}));break;case p:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.EP8}));break;case h:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.jwU}));break;case g:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.onj}));break;case E:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,src:oe.x.getWeatherGlyph("29")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.fs4}));break;case m:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,src:oe.x.getWeatherGlyph("31")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Qcv}));break;case I:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,src:oe.x.getWeatherGlyph("31")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.aR8}));break;case _:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("2")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.EP8}));break;case S:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("3")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.jwU}));break;case T:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("4")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.onj}));break;case y:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.YsH}));break;case w:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Awk}));break;case k:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Swd}));break;case C:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.pXV}));break;case x:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.tHk}));break;case F:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.qAw}));break;case R:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Duq}));break;case j:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.W_t}));break;case D:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.MHM}));break;case O:t=ae.default.createElement(ie.y,Object.assign({},Object.assign({width:"12px",height:"12px"},e.styles),{glyphType:te.L66}));break;case W:t=ae.default.createElement(ie.y,Object.assign({},Object.assign({width:"22px",height:"12px"},e.styles),{glyphType:te.kGr}));break;case A:t=ae.default.createElement(ie.y,Object.assign({},Object.assign({width:"20px",height:"20px"},e.styles),{glyphType:te.QAZ}));break;case P:t=(null==e?void 0:e.useNewWeatherIcon)?ae.default.createElement("img",{style:e.styles,width:"24px",src:oe.x.getWeatherGlyph("24")}):ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.Nh7}));break;case L:t=ae.default.createElement(ie.y,Object.assign({},Object.assign({width:"20px",height:"20px"},e.styles),{glyphType:te.Ivt}));break;case U:t=ae.default.createElement(ie.y,Object.assign({},Object.assign({width:"20px",height:"20px"},e.styles),{glyphType:te.RYw}));break;case B:t=ae.default.createElement(ie.y,Object.assign({},Object.assign({width:"20px",height:"20px"},e.styles),{glyphType:te.TRL}));break;case N:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.U5c}));break;case z:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.QlI}));break;case V:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te._9F}));break;case M:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.ySU}));break;case G:t=ae.default.createElement(ie.y,Object.assign({},e.styles,{glyphType:te.gNj}));break;default:t=null}return t},se=e=>ae.default.createElement("img",{width:"32px",height:"32px",src:oe.x.getWeatherGlyph(e)}),re=function(){return ae.default.createElement("span",{role:"presentation","aria-hidden":"true",className:"iconClose"},ae.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ae.default.createElement("path",{d:"M5.70801 5L10 9.29199L9.29199 10L5 5.70801L0.708008 10L0 9.29199L4.29199 5L0 0.708008L0.708008 0L5 4.29199L9.29199 0L10 0.708008L5.70801 5Z",fill:"black",fillOpacity:"0.83"})))},le=function(){return ae.default.createElement("span",{role:"presentation","aria-hidden":"true",className:"iconClose"},ae.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ae.default.createElement("path",{d:"M5.70801 5L10 9.29199L9.29199 10L5 5.70801L0.708008 10L0 9.29199L4.29199 5L0 0.708008L0.708008 0L5 4.29199L9.29199 0L10 0.708008L5.70801 5Z",fill:"white","fill-opacity":"0.7"})))};var de=i(80013),ce=i(60483);function ue(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map((e=>("0"+e.toString(16)).slice(-2))).join("")}))}var pe=i(9344);const he="weather_feedback",ge="selected",me="enabled";class fe extends de.Z{constructor(e){super(e),this.handledProps={managedClasses:void 0,localizedStrings:void 0,scenario:void 0,muidHash:void 0,isWeatherPage:void 0,background:void 0,enableShowSubmittedCount:void 0,countFeedbackSubmitted:void 0,reportEventId:void 0,weatherLocation:void 0,weatherSource:void 0,ourCurrentWeatherInfo:void 0,enableNestedThanks:void 0,dialogStyles:void 0,dialogContentStyles:void 0,modifiedTriangleStyles:void 0,thanksMsgStyles:void 0,displayFeedbackDialogHandler:void 0,setUserSelectionHandler:void 0,onAfterSubmit:void 0,feedbackWeatherTags:void 0,cancelTags:void 0,submitTags:void 0,isSkyConditionsReverse:void 0,disableTopTriangle:void 0,smallerHeight:void 0,useNewWeatherIcon:void 0},this.onBreakpointCallback=e=>{const t=this.state.popupColumns,i=this.getPopupColumns(e);t!==i&&(this.setState({popupColumns:i}),this.setColumnsClass(e))},this.renderPopupContent=()=>{const{managedClasses:e,localizedStrings:t,dialogContentStyles:i,modifiedTriangleStyles:a,disableTopTriangle:o}=this.props,n=this.state.enabledSubmit&&this.state.submitTelemetryTags||this.props.submitTags,s=this.props.isWeatherPage&&this.props.background,r=s?{background:this.props.background}:{};return ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{id:"weather-feedback-dialog",className:`${(0,J.A)(e.weather_feedback_popup_section,e.weather_feedback_popup_show)} ${this.state.columns4Class}`,tabIndex:-1,onKeyDown:this.handleKeyDown,style:i},ae.default.createElement("div",{className:e.weather_feedback_popup_container},!o&&ae.default.createElement("div",{className:e.weather_feedback_popup_triangle,style:Object.assign(Object.assign({},a),r)}),ae.default.createElement("div",{className:e.weather_feedback_popup_inner,style:r},ae.default.createElement("button",Object.assign({},this.props.cancelTags,{onClick:this.clickButtonCancel,className:e.wf_close_button}),s?le():re()),ae.default.createElement("div",{className:e.weather_feedback_popup_title},t.popupTitle),ae.default.createElement("div",{className:e.wf_popup_subtitle},t.inspirationTitle),ae.default.createElement("div",{className:e.weather_feedback_popup_content},this.renderContent()),ae.default.createElement("div",{className:e.weather_feedback_popup_footer},ae.default.createElement("button",Object.assign({},this.props.cancelTags,{onClick:this.clickButtonCancel,className:(0,J.A)(e.weather_feedback_popup_footer_button,e.weather_feedback_popup_cancel),"aria-label":t.cancel,title:t.cancel}),ae.default.createElement("span",{tabIndex:-1},t.cancel)),ae.default.createElement("button",Object.assign({},this.state.enabledSubmit?{}:{tabIndex:-1},n,{onClick:this.clickButtonSubmit,className:(0,J.A)(e.weather_feedback_popup_footer_button,e.weather_feedback_popup_submit,this.state.enabledSubmit?me:null),"aria-label":t.submit,title:t.submit,disabled:!this.state.enabledSubmit,"data-eventtype":he}),ae.default.createElement("span",{tabIndex:-1,"data-eventtype":he},t.submit))),this.props.enableShowSubmittedCount?ae.default.createElement("div",{className:e.wf_summary_container},this.renderSummaryContent()):null))))},this.renderSummaryContent=()=>{const{managedClasses:e,localizedStrings:t,countFeedbackSubmitted:i}=this.props,a=null==i?"":i;return ae.default.createElement("div",{className:e.wf_summary_content},ae.default.createElement("div",{className:e.wf_summary_submitted_num},a),ae.default.createElement("div",{className:e.wf_summary_submitted_desc},t.feedbackSubmitted))},this.renderContent=()=>ae.default.createElement(ae.default.Fragment,null,this.renderSkyCondition(),this.renderPrecipitation(),this.renderTemperature()),this.renderSkyCondition=()=>{const{managedClasses:e,localizedStrings:t,dialogContentStyles:i,ourCurrentWeatherInfo:a,smallerHeight:o,useNewWeatherIcon:n}=this.props,s=null==a?void 0:a.isNight,r=this.props.isSkyConditionsReverse?[].concat(this.state.skyConditionItems).reverse():this.state.skyConditionItems;return ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{className:e.wf_skyConditions_container},ae.default.createElement("div",{className:e.wf_skyConditions_title},t.skyConditionTitle),ae.default.createElement("div",{className:(0,J.A)(e.wf_skyConditions_items,this.state.columns4Class)},r.map(((i,a)=>ae.default.createElement("div",{className:(0,J.A)(e.wf_skyCondition_item,[e.wf_item_smaller_height,o]),key:`${i.iconCode}_${a}`},ae.default.createElement("button",Object.assign({},this.props.feedbackWeatherTags,{onClick:e=>this.clickSkyConditionItem(e,i.skyCode),"data-skycode":i.skyCode,className:(0,J.A)(e.weather_feedback_popup_weathers_item,i.selected?ge:null),"aria-label":t[i.value]}),ae.default.createElement("div",{tabIndex:-1,className:e.weather_feedback_popup_weathers_item_content},ae.default.createElement(ne,{useNewWeatherIcon:n,type:s?i.nigthIconCode:i.iconCode,styles:{width:"24px",height:"24px"}}),ae.default.createElement("span",{className:e.weather_feedback_popup_weathers_item_name},t[s?i.nightValue:i.value])))))))))},this.renderPrecipitation=()=>{const{managedClasses:e,localizedStrings:t,smallerHeight:i,useNewWeatherIcon:a}=this.props;let o=null,n=0;return this.hasRenderedDetial=!0,ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{className:e.wf_precipitation_container},ae.default.createElement("div",{className:e.wf_precipitation_title},t.precipitationTitle),ae.default.createElement("div",{className:(0,J.A)(e.wf_precipitation_items,this.state.columns4Class)},this.state.precipitationItems.map(((s,r)=>{let l=r%this.state.popupColumns;return l||(o=null),s.details&&s.selected&&(n=l,o=s,this.hasRenderedDetial=!1),o&&r===$.length-1&&!this.hasRenderedDetial&&(l=this.state.popupColumns-1),ae.default.createElement(ae.default.Fragment,{key:`${s.iconCode}_${r}`},ae.default.createElement("div",{className:(0,J.A)(e.wf_precipitation_item,[e.wf_item_smaller_height,i])},ae.default.createElement("button",Object.assign({},this.props.feedbackWeatherTags,{onClick:e=>this.clickPrecipitationItem(e,s.skyCode),"data-skycode":s.skyCode,className:(0,J.A)(e.weather_feedback_popup_weathers_item,s.selected?ge:null),"aria-label":t[s.value]}),ae.default.createElement("div",{tabIndex:-1,className:e.weather_feedback_popup_weathers_item_content},ae.default.createElement(ne,{useNewWeatherIcon:a,type:s.iconCode}),ae.default.createElement("span",{className:e.weather_feedback_popup_weathers_item_name},t[s.value])))),this.renderReportedWeatherDetails(o,n,l))})))))},this.renderTemperature=()=>{const{managedClasses:e,localizedStrings:t,dialogContentStyles:i,ourCurrentWeatherInfo:a,smallerHeight:o,useNewWeatherIcon:n}=this.props;return ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{className:e.wf_temp_container},ae.default.createElement("div",{className:e.wf_temp_title},t.temperatureLabel),ae.default.createElement("div",{className:(0,J.A)(e.wf_temp_items,this.state.columns4Class)},this.state.temperatureItems.map(((i,a)=>ae.default.createElement("div",{className:(0,J.A)(e.wf_temp_item,[e.wf_item_smaller_height,o]),key:`${i.iconCode}_${a}`},ae.default.createElement("button",Object.assign({},this.props.feedbackWeatherTags,{onClick:e=>this.clickTemperatureItem(e,i.skyCode),"data-skycode":i.skyCode,className:(0,J.A)(e.weather_feedback_popup_weathers_item,i.selected?ge:null),"aria-label":t[i.value]}),ae.default.createElement("div",{tabIndex:-1,className:e.weather_feedback_popup_weathers_item_content},ae.default.createElement(ne,{useNewWeatherIcon:n,type:i.skyCode}),ae.default.createElement("span",{className:e.weather_feedback_popup_weathers_item_name},t[i.value])))))))))},this.clickSkyConditionItem=(e,t)=>{const i=H;let a=null,o=!1;i.forEach((e=>{e.skyCode!==t?e.selected=!1:(e.selected=!e.selected,a=e.selected?e:null)})),o=!!(a||this.isVlalidSelectedPrecip(this.state.selectedPrecipitationItem)||this.state.selectedTemperatureItem),this.setState({skyConditionItems:i,enabledSubmit:o,selectedSkyConditionItem:a}),this.lazyGenerateTelemetryObject()},this.clickPrecipitationItem=(e,t)=>{const i=$;let a=null,o=!1;i.forEach((e=>{e.skyCode!==t?e.selected=!1:(e.selected=!e.selected,a=e.selected?e:null),e.details&&e.details.forEach((e=>{e.selected=!1}))})),o=!!(this.state.selectedSkyConditionItem||this.isVlalidSelectedPrecip(a)||this.state.selectedTemperatureItem),this.setState({precipitationItems:i,enabledSubmit:o,selectedPrecipitationItem:a}),this.lazyGenerateTelemetryObject()},this.clickweatherDetailsItem=(e,t)=>{let i=null,a=!1;$.forEach((e=>{e.details?e.details.forEach((a=>{const o=a;o.skyCode===t?(o.selected=!o.selected,e.selected=!0,i=e):o.selected=!1})):e.selected=!1})),a=!!(this.state.selectedSkyConditionItem||this.isVlalidSelectedPrecip(i)||this.state.selectedTemperatureItem),this.setState({enabledSubmit:a,selectedPrecipitationItem:i}),this.lazyGenerateTelemetryObject()},this.clickTemperatureItem=(e,t)=>{const i=K;let a=null,o=!1;i.forEach((e=>{e.skyCode!==t?e.selected=!1:(e.selected=!e.selected,a=e.selected?e:null)})),o=!!(this.state.selectedSkyConditionItem||this.isVlalidSelectedPrecip(this.state.selectedPrecipitationItem)||a),this.setState({temperatureItems:i,enabledSubmit:o,selectedTemperatureItem:a}),this.lazyGenerateTelemetryObject()},this.isVlalidSelectedPrecip=e=>!!e,this.generateData=()=>(0,o.mG)(this,void 0,void 0,(function*(){var e,t,i;const a=this.props.ourCurrentWeatherInfo,o=this.state.selectedPrecipitationItem,n=this.state.selectedSkyConditionItem,s=this.state.selectedTemperatureItem,r=this.getPrepecatationCatetory(o);return{weReported:{current:null==a?void 0:a.currentRaw,units:null==a?void 0:a.unitsRaw,source:this.props.weatherSource},userReported:Object.assign({weather:Object.assign({},n?{skyCondition:(null==a?void 0:a.isNight)?null==n?void 0:n.categoryNight:null==n?void 0:n.category}:null,r?Object.assign({},r):null,s?{temperature:s.category}:null),locationName:null===(e=a.locationRaw)||void 0===e?void 0:e.displayName,latitude:null===(t=a.locationRaw)||void 0===t?void 0:t.latitude,longitude:null===(i=a.locationRaw)||void 0===i?void 0:i.longitude,time:(new Date).toISOString(),hashString:this.props.muidHash||(yield this.generateMuidSHA())},this.props.reportEventId?{reportEventId:this.props.reportEventId}:{})}})),this.lazyGenerateTelemetryObject=()=>{setTimeout((()=>{this.generateTelemetryObject()}),300)},this.generateTelemetryObject=()=>(0,o.mG)(this,void 0,void 0,(function*(){const e={behavior:r.wu.Undefined,action:r.Aw.Click,type:r.c9.Interaction,name:"WeatherFeedback_Submit",ext:{weatherFeedback:yield this.generateData()}};this.setState({submitTelemetryTags:new ce.D(e).render()})})),this.getPrepecatationCatetory=e=>{if(e){return(e=>(null==e?void 0:e.subcategory)?{precipitation:e.category,precipitationIntensity:e.subcategory}:{precipitation:e.category})(e.details&&e.details.find((e=>e.selected))||e)}return null},this.resetRefState=()=>{H.forEach((e=>{e.selected=!1})),$.forEach((e=>{var t;e.selected=!1,null===(t=e.details)||void 0===t||t.forEach((e=>{e.selected=!1}))})),K.forEach((e=>{e.selected=!1}))},this.closePopup=(e=!1)=>{const{displayFeedbackDialogHandler:t}=this.props;t&&t(e)},this.handleKeyDown=e=>{e.keyCode!==ee.Lp&&"Escape"!=e.key||this.closePopup()},this.onDocumentKeydown=e=>{setTimeout((()=>{if(this.rootRef&&this.rootRef.current&&(e.keyCode==ee.RN||"Tab"==e.key)&&document.activeElement&&!this.rootRef.current.contains(document.activeElement))if(this.props.isWeatherPage)this.closePopup();else{const e=this.rootRef.current.querySelector("button");null==e||e.focus()}}),100)},this.clickButtonCancel=e=>{this.closePopup()},this.generateMuidSHA=()=>(0,o.mG)(this,void 0,void 0,(function*(){try{const e=(0,pe.jG)();if(!e)return"";const t=(new TextEncoder).encode(e),i=yield ue(t);return null==i?void 0:i.substr(0,32)}catch(e){return""}})),this.clickButtonSubmit=e=>(0,o.mG)(this,void 0,void 0,(function*(){var e;if(!this.state.enabledSubmit)return;this.closePopup(!0);const t=Object.assign({},yield this.generateData()),i={type:he,submitValue:JSON.stringify(t)};if(this.props.setUserSelectionHandler){const t=this.state.selectedPrecipitationItem;this.props.setUserSelectionHandler({skyCondition:this.state.selectedSkyConditionItem,precipitation:(null===(e=null==t?void 0:t.details)||void 0===e?void 0:e.find((e=>e.selected)))||t,temperature:this.state.selectedTemperatureItem})}l.M.sendFeedbackEvent(i),this.props.onAfterSubmit&&this.props.onAfterSubmit(t)})),this.rootRef=ae.default.createRef();const t=this.getPopupColumns((0,n.Bn)().currentColumnArrangement),i=4===t?Z:"";this.resetRefState(),this.state={skyConditionItems:H,precipitationItems:$,temperatureItems:K,selectedSkyConditionItem:null,selectedPrecipitationItem:null,selectedTemperatureItem:null,enabledSubmit:!1,isThanksMessageShown:!1,popupColumns:t,columns4Class:i,curTempIndex:3,isPopupShown:!1,submitTelemetryTags:void 0}}getPopupColumns(e){let t=3;switch(e){case s.K$.c1:case s.K$.c2:t=3;break;case s.K$.c3:case s.K$.c4:case s.K$.c5:default:t=4}return t}componentDidMount(){(0,n.Bn)().subscribe(this.onBreakpointCallback),document.addEventListener("keydown",this.onDocumentKeydown,!1)}componentWillUnmount(){(0,n.Bn)().unsubscribe(this.onBreakpointCallback),document.removeEventListener("keydown",this.onDocumentKeydown,!1)}setColumnsClass(e){const t=this.getPopupColumns(e),i=4===this.state.popupColumns?Z:"";this.setState({popupColumns:t,columns4Class:i})}render(){const{managedClasses:e,dialogStyles:t}=this.props;return ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{className:e.weather_feedback_root,ref:this.rootRef,style:t},!this.state.isThanksMessageShown&&this.renderPopupContent()))}renderReportedWeatherDetails(e,t,i){if(i!==this.state.popupColumns-1)return null;const{managedClasses:a,localizedStrings:o,ourCurrentWeatherInfo:n,useNewWeatherIcon:s}=this.props,r=null==n?void 0:n.isNight;return e&&e.details?(this.hasRenderedDetial=!0,ae.default.createElement("div",{className:(0,J.A)(a.weather_feedback_popup_weather_details_container,this.state.columns4Class)},ae.default.createElement("div",{className:(0,J.A)(a.wf_triangle,this.state.columns4Class),"data-row-index":t}),ae.default.createElement("ul",{key:`${e.skyCode}_detail`,"data-row-index":t,"data-details-length":e.details.length,className:(0,J.A)(a.weather_feedback_popup_weather_details,this.state.columns4Class)},e.details.map((e=>{const t=e;return ae.default.createElement("li",{key:t.skyCode,className:a.weather_feedback_popup_details_item_container},ae.default.createElement("button",Object.assign({},this.props.feedbackWeatherTags,{onClick:e=>this.clickweatherDetailsItem(e,t.skyCode),"data-skycode":t.skyCode,className:(0,J.A)(a.weather_feedback_popup_details_item,t.selected?ge:null),"aria-label":o[t.value]}),ae.default.createElement("div",{tabIndex:-1,className:a.weather_feedback_popup_details_item_content},ae.default.createElement(ne,{useNewWeatherIcon:s,type:r&&t.nigthIconCode?t.nigthIconCode:t.iconCode}),ae.default.createElement("span",{className:a.weather_feedback_popup_details_item_name},o[t.value]))))}))))):null}}const be=(0,a.ZP)(X)(fe);(0,a.ZP)((e=>({weather_feedback_root:X(e).weather_feedback_root})))(fe);var ye=i(68208),we=i(201),ke=i(68364),ve=i(26415),Ce=i(33379);const xe=Object.assign(Object.assign({},we.h),{onVisualReady:void 0});class Fe extends we.j{constructor(){super(...arguments),this.checkVR=!1,this.$ready=()=>{this.checkVR&&this.isUIReady()&&(0,Ce.N)()&&window.requestAnimationFrame((()=>{setTimeout((()=>{this.checkVR&&(this.checkVR=!1,super.markTimeToVisuallyReady(!0),setTimeout((()=>{this.props.onVisualReady()}),0))}),0)}))}}componentDidCatch(e){const t=Object.assign(Object.assign({},this.props),{managedClasses:void 0});(0,ke.OO)(e,ve.s5R,`unhandled error in exp=[${this.props.experienceName}], props=[${JSON.stringify(t)}]`)}componentDidMount(){if(super.componentDidMount(),this.checkVR){const e=this.props.elementtiming;e&&(0,ye.Oe)(window.PerformanceObserver,e,(e=>{this.markTimeToVisuallyReady(!0,e.startTime)}))||this.$ready()}}componentDidUpdate(e){super.componentDidUpdate(e),this.$ready()}isUIReady(){return!0}}const _e="flyout",Se="wfFollowPageBackground",Te="wfDialogTypeFlyout",Ee="wfDialogTypePage";Ie=25,Math.random();var Ie;const Ne="1",Re="2";var je=i(64434);const De="weather_feedback_popup_colums2";var Oe=i(35320),We=i(83227);const Ae="weather_feedback";class Pe extends Fe{constructor(e){super(e),this.skipTTVR=!0,this.handledProps=Object.assign(Object.assign({},xe),{managedClasses:void 0,localizedStrings:void 0,scenario:void 0,weatherLocation:void 0,weatherSource:void 0,ourCurrentWeatherInfo:void 0,isSkyConditionsReverse:void 0,showTips:void 0,enableFeedbackTrigger:void 0,enableTargetedQuestion:void 0,targetQuestion:void 0,isUserWithinRange:void 0,showDiaglog:void 0,tags:void 0,anchorDivId:void 0,muidSHA:void 0,isWeatherPage:void 0,background:void 0,enableShowSubmittedCount:void 0,countFeedbackSubmitted:void 0,reportEventId:void 0,close:void 0,show:void 0,closeTips:void 0,updateFeedbackCount:void 0,disableTopTriangle:void 0,dialogStylesType:void 0,showDialogBackground:void 0,smallerHeight:void 0,keepOpenOnDocumentClick:void 0,enableNewFeedbackApi:void 0,submitNewFeedback:void 0,useNewWeatherIcon:void 0}),this.onBreakpointCallback=e=>{const t=this.state.popupColumns,i=this.getPopupColumns(e);t!==i&&(this.setState({popupColumns:i}),this.setColumns2Class(e))},this.getOffsetLength=(e,t=!1)=>{var i,a,o;let n=60;const s=this.getAnchor();if(s){const r=14,l=Math.abs(((null===(i=s.parentElement)||void 0===i?void 0:i.getBoundingClientRect())||{})[e]-((null===(o=null===(a=s.parentElement)||void 0===a?void 0:a.parentElement)||void 0===o?void 0:o.getBoundingClientRect())||{})[e])+1,d=(t||2===this.state.popupColumns?280:400)-r-r;n=l>d?d:l}return isNaN(n)?60:n},this.isWeatherFeedbackEle=e=>{var t,i;return(null===(i=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.dataset)||void 0===i?void 0:i.eventtype)==Ae},this.onDocumentClick=e=>{if(this.props.keepOpenOnDocumentClick)return;const t=this.getAnchor();t&&(null==e?void 0:e.target)&&t.contains(e.target)||this.isWeatherFeedbackEle(e)||(this.closePopup(),this.closeThanksDialog())},this.closePopup=()=>{this.props.close(),this.setState({isFromBannerNo:!1})},this.onV3DialogClose=e=>{e&&this.showThanksMessage(),this.closePopup()},this.renderSummaryContent=()=>{const{managedClasses:e,localizedStrings:t,countFeedbackSubmitted:i}=this.props,a=null==i?"":i;return ae.default.createElement("div",{className:e.wfSummaryContent},ae.default.createElement("div",{className:e.wfSummarySubmittedNum},a),ae.default.createElement("div",{className:e.wfSummarySubmittedDesc},t.feedbackSubmitted))},this.onClickBannerCloseButton=()=>{this.closePopup()},this.onClickCorrectWeatherYes=()=>(0,o.mG)(this,void 0,void 0,(function*(){this.closePopup(),this.showThanksMessage();const e=this.generateYesNoData(),t={type:Ae,submitValue:JSON.stringify(e)};l.M.sendFeedbackEvent(t),this.afterDialogSubmit(e)})),this.generateYesNoData=(e=!0)=>{var t,i,a;const o=this.props.ourCurrentWeatherInfo;return{weReported:{current:o.currentRaw,units:o.unitsRaw,source:this.props.weatherSource},userReported:Object.assign({weather:{isCurrentWeatherCorrect:e?"yes":"no",precipitation:!e&&this.props.enableTargetedQuestion&&"skycondition"!==this.props.targetQuestion?"noPrecipitation":""},locationName:null===(t=o.locationRaw)||void 0===t?void 0:t.displayName,latitude:null===(i=o.locationRaw)||void 0===i?void 0:i.latitude,longitude:null===(a=o.locationRaw)||void 0===a?void 0:a.longitude,time:(new Date).toISOString(),hashString:this.props.muidSHA},e?{}:{reportEventId:this.props.reportEventId})}},this.generateYesNoTelemetryObject=(e=!0)=>{const t=this.props.tags.wfTelemetryObject;if(!t)return null;const i=this.generateYesNoData(e),a=Object.assign(Object.assign({},this.props.tags.wfTelemetryObject.contract),{behavior:r.wu.Undefined,action:r.Aw.Click,type:r.c9.Interaction,name:e?"WeatherFeedback_Correct":"WeatherFeedback_Incorrect",ext:{weatherFeedback:i}});return t.addOrUpdateChild(a,t),t.render()},this.onClickCorrectWeatherNo=e=>(0,o.mG)(this,void 0,void 0,(function*(){this.setState({isFromBannerNo:!0});const e=this.generateYesNoData(!1),t={type:Ae,submitValue:JSON.stringify(e)};l.M.sendFeedbackEvent(t),this.props.closeTips(),this.props.enableTargetedQuestion&&"skycondition"!=this.props.targetQuestion?(this.showThanksMessage(),this.afterDialogSubmit(e)):this.props.show()})),this.setUserSelection=e=>{this.setState({userFeedbackData:e})},this.closeThanksDialog=()=>{this.state.isThanksMessageShown&&(this.setState({isThanksMessageShown:!1}),this.setUserSelection(null))},this.onClickThanksCloseButton=()=>{this.closeThanksDialog()},this.onDocumentKeydown=e=>{var t,i,a;if((null===(t=this.state)||void 0===t?void 0:t.isThanksMessageShown)&&e)if(e.keyCode!==ee.Lp&&"Escape"!=e.key)if(e.keyCode!=ee.RN&&"Tab"!=e.key);else{if(!this.thanksCloseRef||!this.thanksCloseRef.current)return;(null===(i=this.props)||void 0===i?void 0:i.isWeatherPage)?document.activeElement&&(null===(a=this.thanksSectionRef)||void 0===a?void 0:a.current)&&!this.thanksSectionRef.current.contains(document.activeElement)&&this.closeThanksDialog():(this.thanksCloseRef.current.focus(),e.preventDefault())}else this.closeThanksDialog()},this.showThanksMessage=()=>{this.setState({isThanksMessageShown:!0})},this.updateCountOfFeedback=e=>{this.props.updateFeedbackCount&&this.props.updateFeedbackCount(e)},this.afterDialogSubmit=e=>{this.updateCountOfFeedback(e),this.props.submitNewFeedback(e,this.props.isUserWithinRange)};const t=this.getPopupColumns((0,n.Bn)().currentColumnArrangement),i=2===t?De:"";this.state={enabledSubmit:!1,popupColumns:t,columns2Class:i,isThanksMessageShown:!1},this.thanksCloseRef=ae.default.createRef(),this.thanksSectionRef=ae.default.createRef()}getPopupColumns(e){let t=3;switch(e){case s.K$.c1:case s.K$.c2:t=2;break;case s.K$.c3:case s.K$.c4:case s.K$.c5:default:t=3}return t}componentDidMount(){(0,n.Bn)().subscribe(this.onBreakpointCallback),document.addEventListener("click",this.onDocumentClick,!1),document.addEventListener("keydown",this.onDocumentKeydown,!1)}componentWillUnmount(){(0,n.Bn)().unsubscribe(this.onBreakpointCallback),document.removeEventListener("click",this.onDocumentClick,!1),document.removeEventListener("keydown",this.onDocumentKeydown,!1)}setColumns2Class(e){const t=this.getPopupColumns(e),i=2===this.state.popupColumns?De:"";this.setState({popupColumns:t,columns2Class:i})}render(){const{showDiaglog:e,managedClasses:t,useNewWeatherIcon:i}=this.props,a=this.getAnchor();return a?ae.default.createPortal(ae.default.createElement(Oe.$6,null,(a=>{const o=(0,Y.Ih)("left","right",a.direction),n=this.getOffsetLength(o),s="flyout"==this.props.dialogStylesType?{left:"calc(50% - 200px)",top:"calc(5%)",right:"calc(50% - 200px)"}:{[o]:`-${n}px`},r={[o]:`${n}px`},l="flyout"==this.props.dialogStylesType&&e?t.dialogBackground:"",d=this.props.isWeatherPage&&this.props.background;return ae.default.createElement("div",Object.assign({},this.unhandledProps(),{className:`${l} ${d?Se:""}`}),e&&ae.default.createElement(be,{weatherLocation:this.props.weatherLocation,weatherSource:this.props.weatherSource,ourCurrentWeatherInfo:this.props.ourCurrentWeatherInfo,scenario:this.props.scenario,localizedStrings:this.props.localizedStrings,isSkyConditionsReverse:this.props.isSkyConditionsReverse,feedbackWeatherTags:this.props.tags.feedbackWeatherTags,cancelTags:this.props.tags.cancelTags,submitTags:this.props.tags.submitTags,disableTopTriangle:this.props.disableTopTriangle,smallerHeight:this.props.smallerHeight,displayFeedbackDialogHandler:this.onV3DialogClose,dialogStyles:s,modifiedTriangleStyles:r,muidHash:this.props.muidSHA?this.props.muidSHA:void 0,reportEventId:this.state.isFromBannerNo?this.props.reportEventId:void 0,setUserSelectionHandler:this.setUserSelection,background:this.props.background,enableShowSubmittedCount:this.props.enableShowSubmittedCount,countFeedbackSubmitted:this.props.countFeedbackSubmitted,onAfterSubmit:this.afterDialogSubmit,isWeatherPage:this.props.isWeatherPage,useNewWeatherIcon:i}),!this.props.showDiaglog&&this.renderInspirationTips(s,r),!this.props.showDiaglog&&this.renderThanksMessage(s,r))})),a):null}getAnchor(){return"string"==typeof this.props.anchorDivId?document.getElementById(this.props.anchorDivId):this.props.anchorDivId}renderThanksMessage(e,t){var i,a,o,n,s,r,l,d;const{managedClasses:c,localizedStrings:u,dialogStylesType:p=""}=this.props,h=this.state.userFeedbackData,g=(null===(i=this.props.ourCurrentWeatherInfo)||void 0===i?void 0:i.isNight)?null===(a=null==h?void 0:h.skyCondition)||void 0===a?void 0:a.nigthIconCode:null===(o=null==h?void 0:h.skyCondition)||void 0===o?void 0:o.iconCode,m=h&&(null===(n=h.precipitation)||void 0===n?void 0:n.iconCode);let f=h&&(null===(s=h.temperature)||void 0===s?void 0:s.value);f=f&&u[f]||"";const b=null===(r=this.props.ourCurrentWeatherInfo)||void 0===r?void 0:r.pvdrIcon,y=null===(l=this.props.ourCurrentWeatherInfo)||void 0===l?void 0:l.currentTemperature,w=m==R||m==O?{width:"20px",height:"20px"}:{width:"26px",height:"26px"},k=this.props.dialogStylesType===_e,v=k?Te:Ee;return this.state.isThanksMessageShown?ae.default.createElement("div",{className:`${c.thanksMessageContainer} ${v}`,style:e,ref:this.thanksSectionRef},ae.default.createElement("div",{className:`${c.wfThanksBg} ${v}`}),!k&&ae.default.createElement("div",{className:c.wfThanksTriangle,style:t}),ae.default.createElement("div",{className:`${c.wfThanksSection} ${v}`},ae.default.createElement("div",{className:c.wfThanksContent},ae.default.createElement("div",{className:c.wfThanksIcon},ae.default.createElement("svg",{width:"44",height:"45",viewBox:"0 0 44 45",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ae.default.createElement("path",{d:"M22 0.619995C34.1503 0.619995 44 10.4697 44 22.62C44 34.7703 34.1503 44.62 22 44.62C9.84974 44.62 0 34.7703 0 22.62C0 10.4697 9.84974 0.619995 22 0.619995ZM31.4973 15.5977C30.9961 15.0965 30.2043 15.0631 29.6644 15.4975L29.5527 15.5977L18.425 26.7255L14.4473 22.7477C13.9103 22.2108 13.0397 22.2108 12.5027 22.7477C12.0016 23.2489 11.9681 24.0407 12.4025 24.5806L12.5027 24.6923L17.4527 29.6423C17.9539 30.1434 18.7457 30.1769 19.2856 29.7425L19.3973 29.6423L31.4973 17.5423C32.0342 17.0053 32.0342 16.1347 31.4973 15.5977Z",fill:"#02961E"}))),ae.default.createElement("div",{className:c.thanksMessage},u.thanksMessage),(g||m||f)&&ae.default.createElement("div",{className:c.wfChangesContent},ae.default.createElement("div",{className:c.wfCurrentCondition},b&&se(b),ae.default.createElement("span",{className:c.wfCurrentConditionTemp},y,"°")),ae.default.createElement("div",{className:c.wfDoubleArrowIcon},ae.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ae.default.createElement("path",{d:"M6.69381 10.3527L1.2846 5.9902C1.03596 5.79129 1.01176 5.44728 1.23051 5.2213C1.44974 4.9957 1.82889 4.97375 2.07796 5.17223L7.09049 9.21303L12.103 5.17223C12.3536 4.98911 12.7187 5.01751 12.9312 5.23667C13.1438 5.45582 13.1284 5.78798 12.8964 5.9902L7.48716 10.3527C7.26027 10.5336 6.9207 10.5336 6.69381 10.3527Z",fill:"#0078D4",stroke:"#0078D4",strokeWidth:"0.8"}),ae.default.createElement("path",{d:"M6.69381 5.80441L1.2846 1.44186C1.03596 1.24295 1.01176 0.898943 1.23051 0.672965C1.44974 0.447364 1.82889 0.425406 2.07796 0.623886L7.09049 4.66469L12.103 0.623886C12.3536 0.440768 12.7187 0.469172 12.9312 0.688326C13.1438 0.907479 13.1284 1.23964 12.8964 1.44186L7.48716 5.80441C7.26027 5.98526 6.9207 5.98526 6.69381 5.80441Z",fill:"#0078D4",stroke:"#0078D4",strokeWidth:"0.8"}))),ae.default.createElement("div",{className:c.wfItemsSelected},ae.default.createElement(ne,{type:g,styles:{width:"30px",height:"30px"}}),ae.default.createElement(ne,{type:m,styles:w}),ae.default.createElement("span",{className:c.wfSelectedTemp},f)))),this.props.enableShowSubmittedCount?ae.default.createElement("div",{className:c.wfSummaryContainer},this.renderSummaryContent()):null,ae.default.createElement("button",Object.assign({className:c.wfThanksDialogCloseButton,onClick:this.onClickThanksCloseButton},null===(d=this.props.tags)||void 0===d?void 0:d.thanksDialogCloseTag,{ref:this.thanksCloseRef,title:u.close}),re()))):null}renderInspirationTips(e,t){var i;if(!this.props.showTips||!(null===(i=this.props.ourCurrentWeatherInfo)||void 0===i?void 0:i.currentRaw))return null;const{managedClasses:a,localizedStrings:o}=this.props,n=this.generateYesNoTelemetryObject(),s=this.generateYesNoTelemetryObject(!1),r=this.props.isWeatherPage&&this.props.background,d=r?{background:this.props.background}:{};let c=o.feedbackTips,u="general";return this.props.enableTargetedQuestion&&("rain"==this.props.targetQuestion?c=o.questionForRain:"snow"==this.props.targetQuestion?c=o.questionForSnow:"mix/ice"==this.props.targetQuestion?c=o.questionForMixedRainSnow:"skycondition"==this.props.targetQuestion&&(c=o.feedbackTips),u=this.props.targetQuestion),null===l.M||void 0===l.M||l.M.addOrUpdateTmplProperty("WF-Feedback-CTA",u),ae.default.createElement(Oe.$6,null,(e=>{var t,i;const l=(0,Y.Ih)("left","right",e.direction),u=this.getOffsetLength(l,!this.props.enableTargetedQuestion),p=null===(t=this.props.ourCurrentWeatherInfo)||void 0===t?void 0:t.pvdrIcon;return ae.default.createElement("div",{className:a.wfV3AutoTipsContainer,style:{[l]:`-${u}px`}},ae.default.createElement("div",{className:a.wfBannertriangle,style:Object.assign({[l]:`${this.props.enableTargetedQuestion?16:u}px`},d)}),ae.default.createElement("div",{className:a.wfV3AutoTipsSection,style:d},ae.default.createElement("button",Object.assign({className:a.wfBannerCloseButton,onClick:this.onClickBannerCloseButton},null===(i=this.props.tags)||void 0===i?void 0:i.bannerCloseTag),r?le():re()),ae.default.createElement("div",{className:a.wfV3AutoTipsContent},ae.default.createElement("div",{className:a.wfV3AutoTipsDes},p&&se(p),ae.default.createElement("div",{className:a.wfV3AutoTipsWords},c)),ae.default.createElement("div",{className:a.wfV3AutoTipsAnswers},ae.default.createElement("button",Object.assign({className:(0,J.A)(a.wfV3AutoTipsNo,a.wfV3AutoTipsAnswer),onClick:this.onClickCorrectWeatherNo,"aria-label":o.no,"data-eventtype":Ae},s||this.props.tags.bannerNoTag),o.no),ae.default.createElement("button",Object.assign({className:(0,J.A)(a.wfV3AutoTipsYes,a.wfV3AutoTipsAnswer),onClick:this.onClickCorrectWeatherYes,"aria-label":o.yes,"data-eventtype":Ae},n||this.props.tags.bannerYesTag),o.yes)))))}))}}Pe.defaultProps={experienceName:We.x.weatherFeedback};var Le=i(55067);class Ue{}Ue.toggleTips=new Le.C("a"),Ue.toggleFeedback=new Le.C("fb"),Ue.setInSampleBucket=new Le.C("SetInSampleBucket"),Ue.setFeedbackTrigger=new Le.C("SetFeedbackTrigger"),Ue.setIsUserWithinRange=new Le.C("SetIsUserWithinRange"),Ue.updateFeedbackNumber=new Le.C("UpdateFeedbackNumber");var Be=i(79180),Ve=i(53076),Me=i(44979),Ge=i(29422),ze=i(31891),He=i(2020),$e=i(13400),Ke=i(54804),qe=i(58155),Ye=i(87298);const Qe={endPoint:"https://api.msn.com",path:"weather/userfeedback",apiKey:"j5i4gDqHL6nGYwx5wi5kRhXjtf2c5qgFX9fzfk0TOo",appId:"9e21380c-ff19-4c78-b4ea-19558e93a5d3",ocid:"msftweather"};class Ze{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=Object.assign(Object.assign({},Qe),null==t?void 0:t.feedbackNumberApi)}getFeedbackNumberResponse(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t={method:"GET",headers:{}},i=[{key:"apiKey",value:this.cfg.apiKey},{key:"appid",value:this.cfg.appId},{key:"ocid",value:this.cfg.ocid},{key:"market",value:$e.jG.CurrentMarket},{key:"locale",value:Ke.Al.Locale},{key:"activityId",value:$e.jG.ActivityId},{key:"user",value:$e.jG.UserId},{key:"lat",value:e.lat},{key:"lon",value:e.lon},{key:"ufFCorrect",value:e.ufFCorrect},{key:"ufUniqueId",value:e.ufUniqueId},{key:"ufRequestType",value:e.ufRequestType||Re}],a=new URL(this.cfg.path+"",this.cfg.endPoint);a.search=qe.c.keyValueArrayToQueryString(i);const n=yield(0,Ye.w)((()=>(0,o.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,t);if(!e.ok)throw Error(e.statusText);return e.json()}))),"get/setUserWeatherFeedbackNumber");return this.getWeatherFeedbackNumberFromResponse(n)}))}getWeatherFeedbackNumberFromResponse(e){var t,i;const a={};try{const a=(null===(i=null===(t=((null==e?void 0:e.value)||[])[0])||void 0===t?void 0:t.responses[0])||void 0===i?void 0:i.outputvalues)||{},o={};return o.totalReportCount=a.TotalReportCount,o.acceptedReportCount=a.AcceptedReportCount,o}catch(e){return a}}}const Xe={endPoint:"https://assets.msn.com/",path:"service/weatherfalcon/weather/userfeedback/trigger",apiKey:"j5i4gDqHL6nGYwx5wi5kRhXjtf2c5qgFX9fzfk0TOo",appId:"9e21380c-ff19-4c78-b4ea-19558e93a5d3",ocid:"msftweather"};class Je{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=Object.assign(Object.assign({},Xe),null==t?void 0:t.feedbackTriggerApi)}getFeedbackTriggerResponse(e){var t,i,a,n,s;return(0,o.mG)(this,void 0,void 0,(function*(){const r={method:"GET",headers:{}},l=[{key:"apiKey",value:this.cfg.apiKey},{key:"appid",value:this.cfg.appId},{key:"ocid",value:this.cfg.ocid},{key:"mkt",value:$e.jG.CurrentMarket},{key:"locale",value:Ke.Al.Locale},{key:"flights",value:Ke.Al.CurrentFlights},{key:"activityId",value:$e.jG.ActivityId},{key:"user",value:$e.jG.UserId},{key:"userLat",value:$e.jG.Latitude},{key:"userLon",value:$e.jG.Longitude},{key:"lat",value:null===(i=null===(t=null==e?void 0:e.currentCondition)||void 0===t?void 0:t.locationRaw)||void 0===i?void 0:i.latitude},{key:"lon",value:null===(n=null===(a=null==e?void 0:e.currentCondition)||void 0===a?void 0:a.locationRaw)||void 0===n?void 0:n.longitude},{key:"iconId",value:null===(s=null==e?void 0:e.currentCondition)||void 0===s?void 0:s.pvdrIcon}],d=new URL(this.cfg.path+"",this.cfg.endPoint);d.search=qe.c.keyValueArrayToQueryString(l);const c=yield(0,Ye.w)((()=>(0,o.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,r);if(!e.ok)throw Error(e.statusText);return e.json()}))),"getWeatherFeedbackTrigger");return this.getFeedbackTriggerFromResponse(c)}))}getFeedbackTriggerFromResponse(e){const t={isTriggered:!1,targetWeather:""};return t.isTriggered=null==e?void 0:e.isTriggered,t.targetWeather=null==e?void 0:e.targetWeather,t}}const et={endPoint:"https://api.msn.com",path:"weather/userfeedback",apiKey:"j5i4gDqHL6nGYwx5wi5kRhXjtf2c5qgFX9fzfk0TOo",appId:"9e21380c-ff19-4c78-b4ea-19558e93a5d3",ocid:"msftweather"};class tt{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=Object.assign(Object.assign({},et),null==t?void 0:t.newFeedbackApi)}submitNewFeedback(e,t){var i,a,n,s;return(0,o.mG)(this,void 0,void 0,(function*(){const r={method:"GET",headers:{}},l=[{key:"apiKey",value:this.cfg.apiKey},{key:"appid",value:this.cfg.appId},{key:"ocid",value:this.cfg.ocid},{key:"market",value:$e.jG.CurrentMarket},{key:"locale",value:Ke.Al.Locale},{key:"flights",value:Ke.Al.CurrentFlights},{key:"activityId",value:$e.jG.ActivityId},{key:"user",value:$e.jG.UserId},{key:"lat",value:null===(i=e.lat)||void 0===i?void 0:i.toString()},{key:"lon",value:null===(a=e.lon)||void 0===a?void 0:a.toString()},{key:"ufRequestType",value:e.ufRequestType||Ne},{key:"ufFCorrect",value:e.ufFCorrect},{key:"ufMSIcon",value:null===(n=e.ufMSIcon)||void 0===n?void 0:n.toString()},{key:"ufMSTemperature",value:null===(s=e.ufMSTemperature)||void 0===s?void 0:s.toString()},{key:"ufPrecipitation",value:e.ufPrecipitation},{key:"ufSkyCondition",value:e.ufSkyCondition},{key:"ufTemperature",value:e.ufTemperature},{key:"ufUniqueId",value:$e.jG.ActivityId},{key:"ufUserLat",value:e.ufUserLat},{key:"ufUserLon",value:e.ufUserLon},{key:"ufIsUserWithinRange",value:t?"yes":"no"}],d=new URL(this.cfg.path+"",this.cfg.endPoint);d.search=qe.c.keyValueArrayToQueryString(l);const c=yield(0,Ye.w)((()=>(0,o.mG)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,r);if(!e.ok)throw Error(e.statusText);return e.json()}))),"newWeatherFeedback");return this.getFeedbackSummaryFromResponse(c)}))}getFeedbackSummaryFromResponse(e){var t,i;const a={};try{const a=(null===(i=null===(t=((null==e?void 0:e.value)||[])[0])||void 0===t?void 0:t.responses[0])||void 0===i?void 0:i.outputvalues)||{},o={};return o.totalReportCount=a.TotalReportCount,o.acceptedReportCount=a.AcceptedReportCount,o}catch(e){return a}}}const it={endPoint:"https://api.msn.com",path:"weather/sample/feedback",apiKey:"j5i4gDqHL6nGYwx5wi5kRhXjtf2c5qgFX9fzfk0TOo",appId:"9e21380c-ff19-4c78-b4ea-19558e93a5d3",ocid:"msftweather"};class at{constructor(e,t,i=null){this.fetchImpl=e,this.config=t,this.xhrFetch=i,this.cfg=Object.assign(Object.assign({},it),null==t?void 0:t.serverFlagApi)}getServerFlagResponse(){return(0,o.mG)(this,void 0,void 0,(function*(){const e={method:"GET",headers:{}},t=[{key:"apiKey",value:this.cfg.apiKey},{key:"appid",value:this.cfg.appId},{key:"ocid",value:this.cfg.ocid},{key:"market",value:$e.jG.CurrentMarket},{key:"locale",value:Ke.Al.Locale},{key:"activityId",value:$e.jG.ActivityId},{key:"user",value:$e.jG.UserId}],i=new URL(this.cfg.path+"",this.cfg.endPoint);i.search=qe.c.keyValueArrayToQueryString(t);const a=yield(0,Ye.w)((()=>(0,o.mG)(this,void 0,void 0,(function*(){const t=yield this.fetchImpl(i.href,e);if(!t.ok)throw Error(t.statusText);return t.json()}))),"getWeatherSampleFeedback");return this.getServerFlagFromResponse(a)}))}getServerFlagFromResponse(e){var t;const i=(null==e?void 0:e.value)||[],a={inSampleBucket:!1};return a.inSampleBucket=!!(null===(t=i[0])||void 0===t?void 0:t.inSampleBucket),a}}class ot extends He.g{constructor(e,t,i,a,o,n,s){super(e,t,i,a,o,n,s),this.onVisualReady=()=>{},this.renderIfOffline=!0}mergeProps(e,t,i){const a=super.mergeProps(e,t,i);return a.onVisualReady=this.onVisualReady,a}}var nt=i(46758);function st(e){var t,i;const{config:a,state:o}=e,n=null===(i=null===(t=null==o?void 0:o.weatherData)||void 0===t?void 0:t.currentCondition)||void 0===i?void 0:i.normalizedSkyCode;if(!n)return"";const s=nt.b.getBackgroudGradient(n,$e.jG.isMobile);return(null==s?void 0:s["background-color"])||(null==s?void 0:s.background)}function rt(e){var t,i,a;const{config:o,state:n,connectorArgs:s}=e;return Object.assign(Object.assign({},s),{localizedStrings:o.localizedStrings.weatherFeedback,ourCurrentWeatherInfo:(null===(t=n.weatherData)||void 0===t?void 0:t.currentCondition)||{skycode:{}},weatherLocation:(null===(i=n.weatherData)||void 0===i?void 0:i.currentLocation)||{},weatherSource:(null===(a=n.weatherData)||void 0===a?void 0:a.source)||{},isSkyConditionsReverse:o.isSkyConditionsReverse,showTips:n.showTips&&n.isUserWithinRange&&(!!n.isTriggered||!!n.inSampleBucket),enableFeedbackTrigger:!!o.enableFeedbackTrigger,enableTargetedQuestion:!!o.enableTargetedQuestion,targetQuestion:n.targetWeather,isUserWithinRange:n.isUserWithinRange,showDiaglog:n.showFeedback,anchorDivId:o.anchorDivId,isWeatherPage:o.isWeatherPage,countFeedbackSubmitted:n.countFeedbackSubmitted,enableShowSubmittedCount:o.enableShowSubmittedCount,background:o.isChangeBackground?st(e):"",disableTopTriangle:o.disableTopTriangle,smallerHeight:o.smallerHeight,dialogStylesType:o.dialogStylesType,keepOpenOnDocumentClick:o.keepOpenOnDocumentClick,enableNewFeedbackApi:o.enableNewFeedbackApi,submitNewFeedback:s.submitNewFeedback,useNewWeatherIcon:o.useNewWeatherIcon})}const lt={inspect:e=>({props:rt(e),missingChildren:[]})};var dt=i(69318);class ct{}ct.updateWeatherDataState=new Le.C("UpdateWeatherDataState"),ct.updateCurrentLocation=new Le.C("UpdateCurrentLocation"),ct.updateBackgroundImage=new Le.C("updateBackgroundImage"),ct.updatePreviousWeatherCondition=new Le.C("updatePreviousWeatherCondition"),ct.onVisualReady=new Le.C("OnVisualReady"),ct.toggleFeedback=new Le.C("fb"),ct.updateDetectedInfo=new Le.C("UpdateDetectedInfo");class ut extends ot{constructor(){super(...arguments),this.close=()=>{this.toggleFeedback(!1)},this.show=()=>{this.toggleFeedback(!0)},this.closeTips=()=>{Ue.toggleTips.getActionSender(this).send(!1)},this.getIsInSampleBucket=()=>(0,o.mG)(this,void 0,void 0,(function*(){try{if(!this.config.isWeatherPage)return;if(!this.serverFlagClient){const e=window.fetch.bind(window);this.serverFlagClient=new at(e,this.config)}const e=yield this.serverFlagClient.getServerFlagResponse();Ue.setInSampleBucket.getActionSender(this).send(!!(null==e?void 0:e.inSampleBucket))}catch(e){Ue.setInSampleBucket.getActionSender(this).send(!1)}})),this.getFeedbackTrigger=()=>(0,o.mG)(this,void 0,void 0,(function*(){try{if(!this.config.isWeatherPage)return;if(!this.feedbackTriggerClient){const e=window.fetch.bind(window);this.feedbackTriggerClient=new Je(e,this.config)}const e=this.getWeatherData(),t=yield this.feedbackTriggerClient.getFeedbackTriggerResponse(e);Ue.setFeedbackTrigger.getActionSender(this).send(t)}catch(e){Ue.setFeedbackTrigger.getActionSender(this).send(void 0)}})),this.initFeedbackNumberAsync=()=>{var e,t,i,a;const o=this.getWeatherData(),n={ufRequestType:Re,ufUniqueId:this.muidSHA,lat:null===(t=null===(e=null==o?void 0:o.currentCondition)||void 0===e?void 0:e.locationRaw)||void 0===t?void 0:t.latitude,lon:null===(a=null===(i=null==o?void 0:o.currentCondition)||void 0===i?void 0:i.locationRaw)||void 0===a?void 0:a.longitude};this.getFeedbackNumber(n)},this.updateFeedbackNumberAsync=e=>{var t,i,a;if(!e)return;const o={ufRequestType:Ne,ufUniqueId:null===(t=e.userReported)||void 0===t?void 0:t.hashString,lat:null===(i=e.userReported)||void 0===i?void 0:i.latitude,lon:null===(a=e.userReported)||void 0===a?void 0:a.longitude,ufFCorrect:void 0};this.getFeedbackNumber(o)},this.getFeedbackNumber=e=>(0,o.mG)(this,void 0,void 0,(function*(){try{if(!this.config.enableShowSubmittedCount)return;if(!this.feedbackNumberClient){const e=window.fetch.bind(window);this.feedbackNumberClient=new Ze(e,this.config)}const t=yield this.feedbackNumberClient.getFeedbackNumberResponse(e);Ue.updateFeedbackNumber.getActionSender(this).send(t)}catch(e){return}})),this.getIsUserWithinRange=()=>{var e;if(this.config.closeDistance<0)return!0;const t=Ge.headLocation(),i=this.getWeatherData(),a=null===(e=null==i?void 0:i.currentCondition)||void 0===e?void 0:e.locationRaw;if(Ge.isValid(t)&&Ge.isValid(a)){return Ge.distance(t,a)<=this.config.closeDistance}return!1},this.submitNewFeedbackAsync=(e,t)=>(0,o.mG)(this,void 0,void 0,(function*(){var i,a,o,n,s,r,l,d,c,u,p,h,g,m,f,b,y,w,k,v;if(!e)return;const C={ufRequestType:Ne,lat:null===(o=null===(a=null===(i=e.weReported)||void 0===i?void 0:i.source)||void 0===a?void 0:a.coordinates)||void 0===o?void 0:o.lat,lon:null===(r=null===(s=null===(n=e.weReported)||void 0===n?void 0:n.source)||void 0===s?void 0:s.coordinates)||void 0===r?void 0:r.lon,ufMSIcon:null===(d=null===(l=e.weReported)||void 0===l?void 0:l.current)||void 0===d?void 0:d.icon,ufMSTemperature:null===(u=null===(c=e.weReported)||void 0===c?void 0:c.current)||void 0===u?void 0:u.temp,ufFCorrect:null===(h=null===(p=e.userReported)||void 0===p?void 0:p.weather)||void 0===h?void 0:h.isCurrentWeatherCorrect,ufPrecipitation:null===(m=null===(g=e.userReported)||void 0===g?void 0:g.weather)||void 0===m?void 0:m.precipitation,ufSkyCondition:null===(b=null===(f=e.userReported)||void 0===f?void 0:f.weather)||void 0===b?void 0:b.skyCondition,ufTemperature:null===(w=null===(y=e.userReported)||void 0===y?void 0:y.weather)||void 0===w?void 0:w.temperatureItem,ufUserLat:null===(k=e.userReported)||void 0===k?void 0:k.latitude,ufUserLon:null===(v=e.userReported)||void 0===v?void 0:v.longitude};this.submitNewFeedback(C,t)})),this.submitNewFeedback=(e,t)=>(0,o.mG)(this,void 0,void 0,(function*(){try{if(!this.config.enableNewFeedbackApi)return;if(!this.newFeedbackClient){const e=window.fetch.bind(window);this.newFeedbackClient=new tt(e,this.config)}yield this.newFeedbackClient.submitNewFeedback(e,t)}catch(e){return}}))}mapStateToProps(e){const t=this.getWeatherData(),i=Object.assign(Object.assign({},e),{weatherData:t}),a=lt.inspect({config:this.config,children:this.childComponentInstanceList,state:i,connectorArgs:{tags:this.tags,scenario:this.scenario,muidSHA:this.muidSHA,reportEventId:this.reportEventId,requestContext:this.requestContext,close:this.close,show:this.show,closeTips:this.closeTips,updateFeedbackCount:this.updateFeedbackNumberAsync,submitNewFeedback:this.submitNewFeedbackAsync}});return Object.assign(Object.assign({},a.props),this.telemetryTags)}getWeatherData(){var e;const t=this.weatherDc.getCurrentState();this.weatherInfoConnector=this.getConnector(We.x.weatherInfoCard);const i=this.weatherInfoConnector&&this.weatherInfoConnector.getCurrentState(),a=null==i?void 0:i.weatherData;return(null===(e=null==a?void 0:a.currentCondition)||void 0===e?void 0:e.currentRaw)?a:t}onComponentConnect(e){return(0,o.mG)(this,void 0,void 0,(function*(){yield He.g.prototype.onComponentConnect.call(this,e),this.scenario=function(e){var t,i;try{const a=(0,Me.Nd)(null===(t=e.data)||void 0===t?void 0:t.locationHref,"locationHref",!1),o=new URL(a);return new URLSearchParams(decodeURIComponent(null===(i=o.search)||void 0===i?void 0:i.replace(/&amp;/gi,"&"))).get("scenario")}catch(e){return""}}(this.requestContext),this.tags=Object.assign(Object.assign({},{wfTelemetryObject:null,entryTags:ht("WeatherFeedback_Open",r.wu.Undefined),feedbackWeatherTags:ht("WeatherFeedback_Item"),cancelTags:ht("WeatherFeedback_Cancel",r.wu.Undefined,r.Aw.Click,"cancel"),submitTags:ht("WeatherFeedback_Submit",r.wu.Undefined,r.Aw.Click,"submit"),bannerYesTag:ht("WeatherFeedback_Correct",r.wu.Undefined,r.Aw.Click,"yes"),bannerNoTag:ht("WeatherFeedback_Incorrect",r.wu.Undefined,r.Aw.Click,"no"),bannerCloseTag:ht("WeatherFeedback_BannerClose",r.wu.Undefined,r.Aw.Click,"banner_close"),thanksDialogCloseTag:ht("WeatherFeedback_ThanksClose",r.wu.Undefined,r.Aw.Click,"thanks_close")}),{wfTelemetryObject:this.telemetryObject}),this.weatherDc=yield this.rootReducer.getDataConnector(Ve.z.WeatherData),this.muidSHA=yield function(){return(0,o.mG)(this,void 0,void 0,(function*(){try{return pt((0,pe.jG)())}catch(e){return""}}))}(),this.reportEventId=yield function(){return(0,o.mG)(this,void 0,void 0,(function*(){try{return pt((0,pe.jG)()+Date.now())}catch(e){return""}}))}(),this.weatherInfoConnector=this.getConnector(We.x.weatherInfoCard);const t=this.getIsUserWithinRange();Ue.setIsUserWithinRange.getActionSender(this).send(t),this.config.enableFeedbackTrigger&&t?this.getFeedbackTrigger():this.getIsInSampleBucket(),this.initFeedbackNumberAsync(),Ue.toggleTips.getActionSender(this).send(this.config.enableFeedbackV3Tips),ze.w.fetchWeatherSummarySuccess.registerObserver((()=>{}),{dispatchConnector:this}),ct.toggleFeedback.registerObserver((e=>{const t=e.params[0];Ue.toggleFeedback.getActionSender(this).send(t)})),dt.pC.toggleWeatherFeedback.registerObserver((e=>{const t=e.params[0];Ue.toggleFeedback.getActionSender(this).send(t)}))}))}toggleFeedback(e){this.anchorConnector||(this.anchorConnector=this.getConnector(We.x.weatherOverviewV2)),this.anchorConnector&&ct.toggleFeedback.getActionSender(this.anchorConnector).send(e),this.weatherInfoConnector=this.getConnector(We.x.weatherInfoCard),this.weatherInfoConnector&&dt.pC.toggleWeatherFeedback.getActionSender(this.weatherInfoConnector).send(e)}getConnector(e){const t=this.rootReducer.connectors().filter((t=>t.namespace.includes(e)));return t&&t[0]}}function pt(e){return(0,o.mG)(this,void 0,void 0,(function*(){try{if(!e)return"";const t=(new TextEncoder).encode(e),i=yield ue(t);return null==i?void 0:i.substr(0,32)}catch(e){return""}}))}function ht(e,t,i,a,o){const n={name:e,behavior:t||r.wu.Undefined,action:i||r.Aw.Click};return a&&(n.content={headline:a}),o&&(n.overrideDestinationUrl=o),new ce.D(n).render()}var gt=i(30856);class mt{reduce(e,t){if(!e)return{};let i=null,a=!1;return a=a||gt.G.handleAction(t,Ue.toggleTips,(t=>{i=Object.assign(Object.assign({},e),{showTips:t})})),a=a||gt.G.handleAction(t,Ue.toggleFeedback,(t=>{i=Object.assign(Object.assign({},e),{showFeedback:t,showTips:!1})})),a=a||gt.G.handleAction(t,Ue.setInSampleBucket,(t=>{i=Object.assign(Object.assign({},e),{inSampleBucket:t})})),a=a||gt.G.handleAction(t,Ue.setFeedbackTrigger,(t=>{i=Object.assign(Object.assign({},e),{isTriggered:null==t?void 0:t.isTriggered,targetWeather:null==t?void 0:t.targetWeather})})),a=a||gt.G.handleAction(t,Ue.setIsUserWithinRange,(t=>{i=Object.assign(Object.assign({},e),{isUserWithinRange:t})})),a=a||gt.G.handleAction(t,Ue.updateFeedbackNumber,(t=>{i=Object.assign(Object.assign({},e),{countFeedbackSubmitted:null==t?void 0:t.totalReportCount})})),i||e}}var ft=i(56162);const bt=(0,a.ZP)((e=>({dialogBackground:{width:"100%",height:"100%",top:"0px",position:"fixed","z-index":`${je.K.Dialog}`,background:"rgba(0,0,0,0.4)",[q.xE]:{background:"none !important"},"& button":Object.assign(Object.assign({},(0,Q.F0)(Object.assign({outline:"2px solid #000000"},q.St))),{[q.xE]:(0,Q.F0)({background:`${q.YP.selectedBackground} !important`})})},wfV3AutoTipsContainer:{position:"absolute",width:"284px",color:"#444444","border-radius":"6px","margin-top":"4px",border:"1px solid #FFFFFF",".wfFollowPageBackground &":{border:"1px solid rgba(255, 255, 255, 0.1)"}},wfBannertriangle:{position:"absolute",top:"-4px",[(0,Y.Ih)("left","right",e.direction)]:"60px",width:"8px",height:"8px","background-color":"#FFFFFF",border:"1px solid #FFFFFF",transform:"rotate(45deg)",".wfFollowPageBackground &":{border:"1px solid rgba(255, 255, 255, 0.1)","backdrop-filter":"blur(70px)"},[q.xE]:{display:"none"}},wfV3AutoTipsSection:{position:"relative",background:"#FFFFFF",padding:"12px 16px","box-sizing":"border-box",".wfFollowPageBackground &":{"backdrop-filter":"blur(70px)"}},wfBannerCloseButton:{position:"absolute",top:"6px",[(0,Y.Ih)("right","left",e.direction)]:"10px",width:"24px",height:"24px",padding:"6px",background:"none",border:"none",cursor:"pointer","z-index":"1","&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"},"& .iconClose":{display:"block",width:"12px",height:"12px"}},wfV3AutoTipsContent:{position:"relative",display:"flex","flex-direction":"column","align-items":"start","justify-content":"space-between"},wfV3AutoTipsDes:{width:"calc(100% - 32px)",display:"flex","align-items":"center","margin-bottom":"12px"},wfV3AutoTipsWords:{"font-size":"14px","line-height":"16px","word-break":"break-word",margin:"0 8px",".wfFollowPageBackground &":{color:"#FFFFFF"}},wfV3AutoTipsAnswers:{position:"relative",width:"100%",display:"flex","align-items":"center","justify-content":"space-between",color:"#0078D4"},wfV3AutoTipsAnswer:{background:"none",border:"none",padding:"0",cursor:"pointer",width:"122px",height:"32px","border-radius":"6px","font-size":"14px","line-height":"16px","&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"}},wfV3AutoTipsYes:{[(0,Y.Ih)("padding-right","padding-left",e.direction)]:"0",color:"#FFFFFF","background-color":"#0078D4"},wfV3AutoTipsNo:{color:"#424242","background-color":"#EDEDED"},wfV3AutoTipsSpliter:{width:"2px",height:"18px","background-color":"#aeaeae"},thanksMessageContainer:{position:"fixed","z-index":"101","&.wfDialogTypePage":{position:"absolute","margin-top":"4px",border:"1px solid #FFFFFF","border-radius":"6px"}},wfThanksBg:{position:"fixed",display:"block",top:"0",left:"0",bottom:"0",right:"0","background-color":"rgba(0, 0, 0, 0.3)","&.wfDialogTypePage":{display:"none"}},wfThanksTriangle:{position:"absolute",top:"-4px",[(0,Y.Ih)("left","right",e.direction)]:"60px",width:"8px",height:"8px","background-color":"#FFFFFF",border:"1px solid #FFFFFF",transform:"rotate(45deg)",".wfFollowPageBackground &":{border:"1px solid rgba(255, 255, 255, 0.1)","backdrop-filter":"blur(70px)"},[q.xE]:{display:"none"}},wfThanksSection:{position:"fixed",display:"block",left:"50%",top:"50%","background-color":"#FFFFFF","border-radius":"6px","z-index":"1001",transform:"translate(-50%, -50%)","box-sizing":"border-box",width:"400px","&.wfDialogTypePage":{position:"relative",left:"0",top:"0",width:"400px",transform:"none","border-radius":"unset"},"& svg":{display:"block"}},thanksMessage:{"font-size":"20px","line-height":"23px",color:"#000000",margin:"16px 24px 0 24px","text-align":"center"},wfThanksContent:{display:"flex","flex-direction":"column","align-items":"center",padding:"0 16px 36px 16px"},wfThanksIcon:{"margin-top":"28px"},wfChangesContent:{position:"relative",display:"none","flex-direction":"column","align-items":"center","margin-top":"24px"},wfCurrentCondition:{display:"flex","align-items":"center","& > span":{margin:"0 4px"}},wfCurrentConditionTemp:{color:"#252423","font-size":"18px",height:"32px","box-sizing":"border-box",padding:"6px 0"},wfDoubleArrowIcon:{margin:"8px 0"},wfItemsSelected:{display:"flex","align-items":"center","& > span":{margin:"0 4px"}},wfSelectedTemp:{color:"#252423","font-size":"14px","box-sizing":"border-box"},wfSummaryContainer:{position:"relative",height:"40px","box-sizing":"border-box",padding:"12px 16px","background-color":"#F8F8F8"},wfSummaryContent:{position:"relative",display:"flex","font-size":"12px","line-height":"14px","align-items":"center","justify-content":"flex-end"},wfSummarySubmittedNum:{color:"#0078D4",margin:"0 8px"},wfSummarySubmittedDesc:{color:"#444444"},wfThanksDialogCloseButton:Object.assign(Object.assign({position:"absolute",top:"6px",[(0,Y.Ih)("right","left",e.direction)]:"10px",width:"24px",height:"24px",padding:"6px",background:"none",border:"none",cursor:"pointer","z-index":"1","&:focus":{outline:"none"},"&:focus-visible":{outline:"-webkit-focus-ring-color auto 1px"},"& .iconClose":{display:"block",width:"12px",height:"12px",[q.xE]:{"& svg path":{fill:`${q.YP.text}`}}}},(0,Q.F0)(Object.assign({outline:"2px solid #000000"},q.St))),{[q.xE]:(0,Q.F0)({background:`${q.YP.selectedBackground} !important`})})})))(Pe),yt={reactComponent:bt,experienceConfigSchema:Be.WeatherFeedbackConfigSchema,mockConfig:ft.mockConfig,inspector:lt.inspect}},69318:function(e,t,i){"use strict";i.d(t,{TM:function(){return n},pC:function(){return o}});var a=i(55067);class o{}o.fetchWeatherAutoSuggestSuccess=new a.C("FetchWeatherAutoSuggestSuccess"),o.flyoutUpdating=new a.C("FlyoutUpdating"),o.launchEditCard=new a.C("LaunchEditCard"),o.showSettingsMenu=new a.C("ShowSettingsMenu"),o.switchToForecast=new a.C("SwitchToForecast"),o.updateWeatherDataState=new a.C("UpdateWeatherDataState"),o.updateForecastContentType=new a.C("UpdateForecastContentType"),o.resetSettingMount=new a.C("resetSettingMount"),o.updateCurrentLocationState=new a.C("UpdateCurrentLocationState"),o.aboveTheFoldVisualReady=new a.C("FlodVisuallyReady"),o.currentLocationDetected=new a.C("CurrentLocationDetected"),o.updateUpsSignals=new a.C("UpdateUpsSignals"),o.updateRecommendLocations=new a.C("UpdateRecommendLocations"),o.updateStateEndIndex=new a.C("UpdateStateEndIndex"),o.updateCurrentPageNumber=new a.C("UpdateCurrentPageNumber"),o.updateComponentMount=new a.C("UpdateComponentMount"),o.updateCardHoveredStatus=new a.C("UpdateCardHoveredStatus"),o.updateDisplayHideCardDialog=new a.C("UpdateDisplayHideCardDialog"),o.updateDisplayHideCardReminder=new a.C("UpdateDisplayHideCardReminder"),o.toggleOcvfeedbackDialogExpInstanceId=new a.C("ToggleOcvfeedbackDialogExpInstanceId"),o.updateDisplayEPlant=new a.C("updateDisplayEPlant"),o.updateLocSearchListVisible=new a.C("UpdateSettingSearchFocusing"),o.toggleWeatherFeedback=new a.C("ToggleWeatherFeedback"),o.weatherFeedbackReady=new a.C("feedbackReady"),o.updateDisplaySdCardMask=new a.C("UpdateDisplaySdCardMask"),o.updateLocationTipShow=new a.C("UpdateLocationTipShow"),o.updateInLocationChoose=new a.C("UpdateLocationChoose"),o.updateShowLocationList=new a.C("UpdateShowLocationList"),o.updateUserInfo=new a.C("UpdateUserInfo");class n{}n.updateIfAutoRotate=new a.C("UpdateIfAutoRotate"),n.updateFavoriteLocations=new a.C("UpdateFavoriteLocations"),n.updateMultiLocationList=new a.C("UpdateMultiLocationList"),n.calcTotalPageNumber=new a.C("CalTotalPageNumber"),n.updateLocationWeatherMap=new a.C("UpdateLocationWeatherMap")},68208:function(e,t,i){"use strict";i.d(t,{Oe:function(){return o}});var a=i(12884);function o(e,t,i){if((()=>{const e=(0,a.zp)();return e&&(e.match(/backgroundpreload/)||e.match(/prerender/))&&"hidden"===document.visibilityState})())return!1;if(!function(e){try{if(!e)return!1;if(!e.supportedEntryTypes)return!1;if(!e.supportedEntryTypes.includes("element"))return!1}catch(e){return!1}return!0}(e))return!1;if(!t)return!1;if("function"!=typeof i)return!1;return new e(((e,a)=>{e.getEntries().forEach((function(e){e.identifier===t&&(i(e),a.disconnect())}))})).observe({type:"element",buffered:!0}),!0}},54788:function(e,t,i){"use strict";i.d(t,{x:function(){return r}});var a=i(97417),o=i(54804),n=i(75736);const s={23:"RainShowersDayV2",26:"SnowShowersDayV2",6:"BlowingHailV2",5:"CloudyV3",20:"LightSnowV2",91:"WindyV2",27:"ThunderstormsV2",10:"FreezingRainV2",77:"RainSnowV2",12:"HazySmokeV2",39:"HazeSmokeNightV2_106",24:"RainSnowV2",78:"RainSnowShowersNightV2",9:"FogV2",3:"PartlyCloudyDayV3",43:"HailNightV2",16:"HailDayV2",8:"LightRainV2",15:"HeavySnowV2",28:"ClearNightV3",30:"PartlyCloudyNightV2",14:"ModerateRainV2",1:"SunnyDayV3",7:"BlowingSnowV2",50:"RainShowersNightV2",82:"SnowShowersNightV2",2:"MostlySunnyDay",29:"MostlyClearNight",4:"MostlyCloudyDayV2",31:"MostlyCloudyNightV2",19:"LightRainV3",17:"LightRainShowerDay",44:"LightRainShowerNight"};class r{static getWeatherGlyph(e){const t=Object.prototype.hasOwnProperty.call(n.h2,e)?n.h2[e]:e,i=s[t]||"",r="zh-cn"===o.Al.Locale?"cn":"com";let l="bundles/v1/weather/latest/";return((0,a.S)("prg-1sw-wxip2")||(0,a.S)("prg-1sw-icwhp")||(0,a.S)("prg-1sw-icui"))&&(l="weathermapdata/1/static/svg/72/v2/card/"),i?`https://assets.msn.${r}/${l}${i}.svg`:""}}}}]);