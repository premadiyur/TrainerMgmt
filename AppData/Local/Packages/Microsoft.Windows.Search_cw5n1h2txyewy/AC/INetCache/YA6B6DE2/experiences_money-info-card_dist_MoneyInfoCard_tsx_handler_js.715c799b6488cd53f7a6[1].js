"use strict";(self.webpackChunk_msnews_msnews_experiences=self.webpackChunk_msnews_msnews_experiences||[]).push([["experiences_money-info-card_dist_MoneyInfoCard_tsx_handler_js"],{60463:function(e,t,r){r.r(t),r.d(t,{MoneyInfoCardHandler:function(){return g}});var a=r(33940),n=r(9375),i=r(84966),s=r(65135),o=r(38156),l=r(65473),d=r(41343),c=r(50844),p=r(4886),h=r(48590),u=r(43132);class g{constructor({card:e,props:t}){this.renderSparkline=(e,t,r,a)=>{const{helper:n,chartMap:i={}}=this.props,s=i[e.id],o=s&&s.chartData,d=o&&o.series;if(Array.isArray(d)&&d.length){const i=`1px dashed ${a=a||(h._T?"#d3d3d3":"rgba(0, 0, 0, 0.618)")}`,o=n.getQuoteColor(e.changePcntNumber),c=l.default.createElement(p.wI,{series:d,totalDataCount:40,baseLine:s.pricePreviousClose,baseLineStyle:i,color:o,width:t,height:r});return l.default.createElement("div",{className:this.getSparklineClassName(e)},(0,p.cr)(c))}},this.renderQuoteAddReminder=()=>{const{localizedStrings:e,managedClasses:t,helper:r,addedQuoteSymbol:a,showReminder:n,telemetry:i}=this.props;if(a&&n&&!r.isSettingDialog()){const n=r.getWatchlistTabUrl();return l.default.createElement("a",Object.assign({className:t.addingQuoteReminder,target:"_blank",href:n},r.getTelemetryTags(i.addingQuoteReminderLinkClick)),l.default.createElement("span",{className:t.quoteReminderText},e.quoteAddedToastText.replace("{stock}",a)),l.default.createElement("span",{className:t.quoteReminderLink},e.seeWatchlistOptStr))}},this.handleCarouselCardClick=e=>(0,a.mG)(this,void 0,void 0,(function*(){const{helper:t,activeTab:r,cardType:a}=this.props;if(this.isClickFromCardBlankArea(e)&&a===c.Lb.ShowData){if((0,u.q9)(r.tabType)){const{helper:e,addListToWatchlist:t}=this.props,r=e.getPpwlQuoteIds();yield t(r)}let e=t.getActiveTabUrl();e=(0,n.Qc)(e),window.open(e,"_blank");const a=this.card.cardBlankAreaRefDict[r.tabType];a&&a.current&&s.M.sendActionEvent(a.current,o.Aw.Click,o.wu.Navigate,e)}})),this.handleFooterLinkClick=(e,t)=>{const{helper:r}=this.props;(0,u.q9)(t)&&r.handlePpwlPageClick(e,e.target)},this.handleAddButtonOnClick=(e,t,r)=>{const{helper:a,addToWatchlist:n}=this.props;a.isInWatchlist(t)||(s.M.sendActionEvent(e.target,o.Aw.Click,o.wu.Undefined),n(e,t,r),this.displayReminder())},this.card=e,this.props=t}renderQuoteSearchPage(){const{helper:e}=this.props;if(!e.getShowSearchPage())return;const t=l.default.createElement(p.LP,Object.assign({},this.props,{setNavIndex:e=>this.card.navIndex=e}));return(0,p.cr)(t)}renderQuoteSearchDialog(){const{showSettingsDialog:e}=this.card.state;if(!e)return;const t=l.default.createElement(p.gE,Object.assign({},this.props,{showSettingsDialog:e,toggleMenu:this.card.toggleMiniSettingsDialog}));return(0,p.cr)(t)}renderHideCardDialog(){const{isDisplayHideCardDialog:e}=this.props;if(!e)return;const t=l.default.createElement(p.eg,Object.assign({},this.props));return(0,p.cr)(t)}renderSparklineGradients(){const e=(0,u.ab)(h._T);return[d.BL,d.uI,e].map((e=>this.renderSparklineGradient(e)))}renderSparklineGradient(e){const{startColor:t,endColor:r}=e;return l.default.createElement("div",{key:e.id,style:{width:"0px",height:"0px"}},l.default.createElement("svg",{style:{width:"0px"},"aria-hidden":"true",focusable:"false"},l.default.createElement("defs",null,l.default.createElement("linearGradient",{id:e.id,x1:"0",y1:"0",x2:"1",y2:"1"},l.default.createElement("stop",{offset:"0%",stopColor:t}),l.default.createElement("stop",{offset:"100%",stopColor:r})))))}renderSdCardMask(){const{config:e,displaySdCardMask:t,helper:r}=this.props,{sdCardMaskConfig:a}=e,{SdCardMask:n}=this.card.state;if(!n)return null;const i=null==a?void 0:a.maskType;return l.default.createElement(n,{cardType:"money",containerBackgroundStyle:null==a?void 0:a.containerBackgroundStyle,delayInMs:null==a?void 0:a.delayInMs,feedbackOptions:null==a?void 0:a.feedbackOptions,isFullCard:r.isFullCard(),maskType:i,shouldRender:t&&(r.isHalfCard()||r.isFullCard()&&"bar"===i)})}renderQuoteAddReminderInModal(){const{managedClasses:e,config:t,telemetry:r,helper:a,localizedStrings:n,addedQuoteSymbol:i,showReminder:s}=this.props,{financeWatchlistPage:o}=t,{quoteAddedToastText:d,seeWatchlistOptStr:c}=n,{quoteReminderAreaInModal:p,quoteReminderTextInModal:h,quoteReminderLinkInModal:u}=e;return i&&s&&a.isSettingDialog()?l.default.createElement("a",Object.assign({className:p,target:"_blank",href:o},a.getTelemetryTags(r.addingQuoteReminderLinkClick)),l.default.createElement("span",{className:h},d.replace("{stock}",i)),l.default.createElement("span",{className:u},c)):null}renderNotificationIcon(e){const{helper:t}=this.props,r=t.getNotificationType(e.id),a=t.getEventNotificationText(e.id,r),n=t.getEventNotificationSignal(e.id,r);let s=t.getEventNotificationFillColor(r,n,a);if((0,u.V8)(r)){const r=e.changePcntNumber>0?(0,p.KB)("svgRisingArrow"):(0,p.KB)("svgDroppingArrow");return s=t.getQuoteColor(e.changePcntNumber),l.default.createElement(i.y,{width:"16px",height:"11px",glyphType:r,fill:s})}if(t.isNotificationEvent(r)){const e=t.getEventNotificationSvg(r,n,a);return l.default.createElement(i.y,{width:"18px",height:"14px",glyphType:e,fill:s})}}handleCarouselDotOnMouseEnter(e,t){e.preventDefault();const{helper:r}=this.props;r.loadChart(t,!0)}handleCarouselDotOnClick(e){return(0,a.mG)(this,void 0,void 0,(function*(){const{getRefreshMoneyCardDataPromise:t}=this.props;yield t();const{tabList:r,updateState:a}=this.props;if(this.card.carouselUlRef.current){a({activeTab:e,isMouseInCarousel:!0}),this.card.navIndex=r.indexOf(e),this.card.paginateCarousel(this.card.navIndex,0)}}))}getSparklineClassName(e){const{managedClasses:t,helper:r}=this.props,a=r.getQuoteColorType(e);return(0,u.Ae)(a)?t.chartGreen:(0,u.Kn)(a)?t.chartRed:t.chartGray}getQuoteRowAriaLabel(e){if(!e)return"";const{displayName:t,symbol:r,price:a,changeValue:n,changePcnt:i}=e;return`${t} ${r} ${this.getDifferenceIndicator(e)} ${a} ${n} ${i}`}getDifferenceIndicator(e){const{localizedStrings:t}=this.props,{unchangedString:r,increaseString:a,decreaseString:n}=t;return e.unchanged?r:e.gain?a:n}getQuoteItemTooltip(e,t){const{localizedStrings:r,helper:a,isNotificationFromTaskbar:n}=this.props,{eventNotificationsDict:i={}}=this.props,s=`${e.displayName} (${a.getQuoteSymbolName(e)})`,o=i[e.id];let l="";o&&o.length&&(l="\r\n"+o[0].shortHeadline),n&&a.isQuoteMovingSharply(e)&&(l="\r\n"+this.getNotificationItem(e));const d=this.card.getNotificationText(e);l=d?"\r\n"+d:"";let c=`${s}${l}\r\n${r.quoteItemToolTip}`;return this.isRecommendedQuote(e,t)&&(c=`${r.suggestedForYouText}\r\n${s}${l}`),c}getNotificationItem(e){const{helper:t}=this.props;return t.isQuoteRisingSharply(e)?t.getNotificationText(e.id,c.k$.PriceIncrement,e.exchangeId):t.isQuoteDroppingSharply(e)?t.getNotificationText(e.id,c.k$.PriceDecrement,e.exchangeId):null}isClickFromCardBlankArea(e){if(!e||!e.target)return!1;const{managedClasses:t}=this.props,r=e.target.id,a=e.target.className;return r===d.Cs||r===d.fz||r===d.F$||a===t.footerLinkContainer}isRecommendedQuote(e,t){const{helper:r}=this.props,a=null==e?void 0:e.id;return!(r.isInWatchlist(a)||!(0,u.P_)(t))}displayReminder(){const{updateState:e}=this.props;e({showReminder:!0});setTimeout((()=>{e({showReminder:!1})}),4e3)}}}}]);